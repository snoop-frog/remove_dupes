<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snoops Bitcoin Wallet Address Checker</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            padding: 20px;
            background-color: #f4f4f4;
        }

        .container {
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
            max-width: 500px;
            margin: 0 auto;
        }

        button {
            margin-top: 10px;
            padding: 10px 15px;
            background-color: #007bff;
            color: white;
            border: none;
            cursor: pointer;
            border-radius: 5px;
        }

        button:hover {
            background-color: #0056b3;
        }

        #output, #duplicates {
            margin-top: 20px;
            background-color: #f9f9f9;
            padding: 10px;
            border-radius: 5px;
            max-height: 200px;
            overflow-y: auto;
        }
    </style>
</head>
<body>

<div class="container">
    <h2>Bitcoin Wallet Address Checker</h2>
    
    <input type="file" id="fileInput" multiple accept=".csv,.json,.txt"><br>

    <button onclick="checkDuplicates()">Check</button>
    <button id="downloadBtn" style="display:none;" onclick="downloadCSV()">Download CSV</button>

    <div id="duplicates"></div>
    <div id="output"></div>
</div>

<script>
    let allAddresses = new Set();
    let duplicateAddresses = new Set();

    function parseCSV(text) {
        return text.split(/\r?\n/).map(line => line.trim()).filter(Boolean);
    }

    function parseJSON(text) {
        try {
            return JSON.parse(text);
        } catch (e) {
            // If not valid JSON, fallback to treating it as plain text
            return parseCSV(text);
        }
    }

    async function checkDuplicates() {
        const files = document.getElementById('fileInput').files;
        allAddresses.clear();
        duplicateAddresses.clear();

        for (let file of files) {
            const text = await file.text();
            let addresses = [];

            if (file.name.endsWith('.csv') || file.name.endsWith('.txt')) {
                addresses = parseCSV(text);
            } else if (file.name.endsWith('.json')) {
                addresses = parseJSON(text);
            }

            for (let address of addresses) {
                if (allAddresses.has(address)) {
                    duplicateAddresses.add(address);
                } else {
                    allAddresses.add(address);
                }
            }
        }

        displayResults();
    }

    function displayResults() {
        const duplicateDiv = document.getElementById('duplicates');
        const outputDiv = document.getElementById('output');

        if (duplicateAddresses.size > 0) {
            duplicateDiv.innerHTML = `<h3>Duplicate Addresses</h3><ul>${[...duplicateAddresses].map(addr => `<li>${addr}</li>`).join('')}</ul>`;
        } else {
            duplicateDiv.innerHTML = `<h3>No Duplicates Found</h3>`;
        }

        outputDiv.innerHTML = `<h3>Unique Addresses</h3><ul>${[...allAddresses].map(addr => `<li>${addr}</li>`).join('')}</ul>`;

        if (allAddresses.size > 0) {
            document.getElementById('downloadBtn').style.display = 'block';
        }
    }

    function downloadCSV() {
        const csvContent = [...allAddresses].join("\n");
        const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
        const url = URL.createObjectURL(blob);

        const downloadLink = document.createElement("a");
        downloadLink.href = url;
        downloadLink.setAttribute("download", "unique_addresses.csv");
        downloadLink.click();
    }
</script>

</body>
</html>
